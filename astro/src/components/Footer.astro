---
import { useSanityClient } from "@sanity/astro";

const aboutSlug = await useSanityClient().fetch(`*[_type == 'about'][0]{
  "slug": slug.current
}`);
---

<footer>
  <p class="copyright">
    Hand-crafted by <a href={"/#" + aboutSlug.slug}>me</a>, powered by <a
      target="_blank"
      rel="noopener noreferrer"
      href="https://astro.build/">Astro</a
    >
     &copy; <span id="copyright-date"></span>
  </p>
  <div class="bg-grad"></div>
</footer>

<style lang="scss">
  footer {
    position: relative;
    margin-top: 8rem;
    .bg-grad {
      position: absolute;
      bottom: 0;
      opacity: 1;
      transition: var(--switchmode-transition-time);
      background-image: radial-gradient(
        100% 100% at 50% 100%,
        rgb(var(--clr-wb-darkish)) 0%,

        rgb(var(--transparent)) 100%
      );
      width: 100%;
      height: 40rem;
      z-index: -999;
    }
    .copyright {
      user-select: none;
      text-align: center;
      font-weight: 500;
      color: var(--c-lighter-text);

      padding: 0.5rem;

      a {
        transition: color 300ms ease;
        opacity: 1;
        color: var(--c-fg);
        font-weight: 700;

        &:hover {
          color: rgb(var(--clr-accent));
        }
      }
    }
  }

  body.lightmode footer .bg-grad {
    opacity: 0;
  }
</style>

<script>
  document.querySelector("#copyright-date").textContent =
    "2k" + new Date().getFullYear().toString().substring(2, 4);
</script>
